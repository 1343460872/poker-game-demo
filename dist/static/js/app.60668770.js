(function(e){function t(t){for(var n,o,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);c&&c(t);while(f.length)f.shift()();return u.push.apply(u,l||[]),a()}function a(){for(var e,t=0;t<u.length;t++){for(var a=u[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(u.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},u=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/poker-game-demo/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=s;u.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"51be":function(e,t,a){"use strict";a.r(t);a("caad"),a("2532"),a("d3b7"),a("25f0"),a("fb6a"),a("ac1f"),a("5319"),a("466d"),a("0481"),a("159b"),a("cb29");var n={arrayFill:function(e){if(e.flat().length!==e.length)return e;var t=e.slice(0);return t.forEach((function(e,a){return t[a]=new Array(e).fill(0)})),t}},r=n,u=function(){return{status:0,board:[],index:0,activePlayer:null,nextPlayer:null,activeRow:null,winer:null}},o=u(),i={nextDisabled:function(e){return!1===e.board.toString().includes("active")},round:function(e){return parseInt(e.index/2)}},s={RESETSTATE:function(e){Object.assign({},u())},SETBOARD:function(e,t){t&&(e.board=t)},SETPLAYER:function(e,t){t&&(e.activePlayer=t)},SETNEXTPLAYER:function(e,t){t&&(e.nextPlayer=t)}},l={SetBoard:function(e,t){var a=e.commit;e.dispatch;return new Promise((function(e,n){a("SETBOARD",r.arrayFill(t)),e()}))},PickPorker:function(e,t){e.commit;var a=e.dispatch,n=t.row,r=t.i;return new Promise((function(e,t){if("end"!==o.status&&"selected"!==o.board[n][r]&&(null===o.activeRow||n===o.activeRow)){a("UpdateBoard",{row:n,i:r,type:"active"});var u=o.board[n].includes("active");o.activeRow=u?n:null,e()}}))},NextPlayer:function(e){var t=e.commit,a=(e.dispatch,e.state),n=e.rootState;return new Promise((function(e,r){var u=a.board.slice(0);a.index++,a.activeRow=null;var o=JSON.stringify(u).replace(/active/g,"selected");u=JSON.parse(o),t("SETBOARD",u);var i=u.toString().match(/0/g),s=null;if(null===i&&(s=a.nextPlayer),1===(null===i||void 0===i?void 0:i.length)&&(s=a.activePlayer),s)return e(s),a.winer=s,void(a.status="end");t("SETPLAYER",n.setting.players[a.index%2]),t("SETNEXTPLAYER",n.setting.players[(a.index+1)%2]),e()}))},UpdateBoard:function(e,t){var a=e.commit,n=(e.dispatch,e.state),r=t.row,u=t.i,o=t.type;return new Promise((function(e,t){var i=n.board.slice(0);i[r][u]=i[r][u]===o?0:o,console.log(i),a("SETBOARD",i),e()}))},InitGame:function(e){var t=e.commit,a=e.dispatch,n=e.state,r=e.rootState;return new Promise((function(e,u){console.log(r.setting.board),t("RESETSTATE"),a("SetBoard",r.setting.board),a("InitPlayer"),n.status="ing",e()}))},InitPlayer:function(e){var t=e.commit,a=(e.dispatch,e.state,e.rootState);return new Promise((function(e,n){t("SETPLAYER",a.setting.players[0]),t("SETNEXTPLAYER",a.setting.players[1]),e()}))}};t["default"]={namespaced:!0,state:o,getters:i,mutations:s,actions:l}},"56d7":function(e,t,a){"use strict";a.r(t);a("e623"),a("e379"),a("5dc8"),a("37e1");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/"}},[e._v("游戏主页")]),e._v(" | "),a("router-link",{attrs:{to:"/game"}},[e._v("游戏")]),e._v(" | "),a("router-link",{attrs:{to:"/setting"}},[e._v("设置")])],1),a("router-view")],1)},u=[],o={name:"App"},i=o,s=(a("5c0b"),a("2877")),l=Object(s["a"])(i,r,u,!1,null,null,null),c=l.exports,d=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("快速开始游戏")]),a("el-button",{on:{click:e.setting}},[e._v("游戏设置")])],1)],1)},p=[],m={name:"Home",data:function(){return{}},computed:{},methods:{submit:function(){this.$router.push({path:"/game"})},setting:function(){this.$router.push({path:"/setting"})}}},b=m,v=Object(s["a"])(b,f,p,!1,null,null,null),h=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting"},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"玩家昵称"}},[a("el-input",{attrs:{placeholder:'输入两位玩家的昵称(以,分隔)，比如"A,B"'},model:{value:e.players,callback:function(t){e.players=t},expression:"players"}})],1),a("el-form-item",{attrs:{label:"参数设置"}},[a("el-input",{attrs:{placeholder:'输入行数与数量(以,分隔)，如"3,5,7"'},model:{value:e.board,callback:function(t){e.board=t},expression:"board"}})],1),a("el-form-item",[a("el-button",{attrs:{disabled:!e.board||!e.players,type:"primary"},on:{click:e.submit}},[e._v("设置")]),a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.fillTip)},slot:"content"}),a("el-button",{attrs:{type:"info",icon:"el-icon-info"},on:{click:e.fillAndSubmit}},[e._v("设置默认")])],1)],1)],1)],1)},y=[],P=a("5530"),S=(a("99af"),a("a15b"),a("ac1f"),a("1276"),a("cb29"),a("2f62")),w={name:"Setting",data:function(){return{default:{players:["A,B"],board:["3,5,7"]}}},computed:{fillTip:function(){return"玩家昵称：".concat(this.default.players,"<br />参数设置：").concat(this.default.board)},players:{get:function(){return this.$store.state.setting.players.join(",")},set:function(e){return this.SetPlayer(e),e}},board:{get:function(){return this.$store.state.setting.board.join(",")},set:function(e){return this.SetBoard(e),e}}},methods:Object(P["a"])(Object(P["a"])({},Object(S["b"])({SetBoard:"setting/SetBoard",SetPlayers:"setting/SetPlayers"})),{},{submit:function(){var e=this;2===this.players.split(",").length?!1!==this.board.split(",").every((function(e){return e>0}))?(this.SetBoard(this.board.split(",")),this.SetPlayers(this.players.split(",")),this.$message.success("游戏设置成功，将进入游戏界面"),setTimeout((function(){e.$router.push({path:"/game"})}),1e3)):this.$message.error("参数设置验证不通过"):this.$message.error("玩家昵称验证不通过")},fill:function(){this.SetBoard(this.default.board),this.SetPlayers(this.default.players)},fillAndSubmit:function(){this.fill(),this.submit()}})},O=w,k=Object(s["a"])(O,g,y,!1,null,null,null),x=k.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game"},[a("div",{staticClass:"flex"},["end"!==e.gameStatus?[a("span",[e._v("玩家："+e._s(e.player))]),a("el-button",{attrs:{disabled:e.disabled},on:{click:e.next}},[e._v("确定 ")])]:a("el-button",{on:{click:e.InitGame}},[e._v("重新开始")])],2),a("board",{on:{PickPorker:e.PickPorker}}),a("router-view")],1)},E=[],_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board"},e._l(e.board,(function(t,n){return a("div",{staticClass:"row",class:{available:e.rowAvailable(n)}},e._l(t,(function(t,r){return a("span",{staticClass:"poker",class:{active:"active"===t,selected:"selected"===t,available:0===t},on:{click:function(t){return e.click(n,r)}}})})),0)})),0)},j=[],B=(a("caad"),a("2532"),a("d3b7"),a("25f0"),{name:"Board",data:function(){return{}},computed:Object(P["a"])({},Object(S["c"])({board:function(e){return e.game.board},row:function(e){return e.game.activeRow}})),methods:Object(P["a"])(Object(P["a"])({},Object(S["b"])({PickPorker:"game/PickPorker"})),{},{click:function(e,t){this.PickPorker({row:e,i:t})},rowAvailable:function(e){return!1===this.board.toString().includes("active")||!0===this.board[e].includes("active")}})}),A=B,R=Object(s["a"])(A,_,j,!1,null,"f95e3a84",null),I=R.exports,$={name:"Game",components:{Board:I},methods:Object(P["a"])(Object(P["a"])({},Object(S["b"])({InitGame:"game/InitGame",PickPorker:"game/UpdateBoard",NextPlayer:"game/NextPlayer"})),{},{next:function(){var e=this;this.NextPlayer().then((function(t){t&&e.$router.push({path:"/game/result"})}))}}),computed:Object(P["a"])({},Object(S["c"])({gameStatus:function(e){return e.game.status},player:function(e){return e.game.activePlayer},disabled:function(e){return e.game.nextDisabled}})),data:function(){return{}},mounted:function(){0===this.gameStatus&&this.InitGame()}},C=$,M=Object(s["a"])(C,T,E,!1,null,null,null),D=M.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result"},[a("h2",{staticClass:"title"},[e._v("游戏结束")]),a("p",{staticClass:"msg"},[e._v("恭喜"+e._s(e.winer)+"获得胜利")]),a("el-button",{on:{click:e.back}},[e._v("返回游戏")]),a("el-button",{on:{click:e.next}},[e._v("再来一局")])],1)},G=[],L={name:"Result",methods:Object(P["a"])(Object(P["a"])({},Object(S["b"])({InitGame:"game/InitGame"})),{},{back:function(){this.$router.push({path:"/game"})},next:function(){this.InitGame(),this.$router.push({path:"/game"})}}),computed:Object(P["a"])({},Object(S["c"])({winer:function(e){return e.game.winer}}))},Y=L,F=Object(s["a"])(Y,N,G,!1,null,null,null),U=F.exports;n["default"].use(d["a"]);var H=[{path:"/",name:"Home",component:h},{path:"/Setting",name:"Setting",component:x},{path:"/game",name:"Game",component:D,children:[{path:"/game/result",name:"Result",component:U}]}],J=new d["a"]({routes:H}),X=J;a("ddb0"),a("5319");n["default"].use(S["a"]);var z=a("c653"),q=z.keys().reduce((function(e,t){var a=t.replace(/^\.\/(.*)\.\w+$/,"$1"),n=z(t);return e[a]=n.default,e}),{}),K=new S["a"].Store({modules:q}),Q=a("5c96");a("0fae"),a("e05f");n["default"].prototype.$ELEMENT={size:"small",zIndex:3e3},n["default"].use(Q["Pagination"]),n["default"].use(Q["Dialog"]),n["default"].use(Q["Autocomplete"]),n["default"].use(Q["Dropdown"]),n["default"].use(Q["DropdownMenu"]),n["default"].use(Q["DropdownItem"]),n["default"].use(Q["Menu"]),n["default"].use(Q["Submenu"]),n["default"].use(Q["MenuItem"]),n["default"].use(Q["MenuItemGroup"]),n["default"].use(Q["Input"]),n["default"].use(Q["InputNumber"]),n["default"].use(Q["Radio"]),n["default"].use(Q["RadioGroup"]),n["default"].use(Q["RadioButton"]),n["default"].use(Q["Checkbox"]),n["default"].use(Q["CheckboxButton"]),n["default"].use(Q["CheckboxGroup"]),n["default"].use(Q["Switch"]),n["default"].use(Q["Select"]),n["default"].use(Q["Option"]),n["default"].use(Q["OptionGroup"]),n["default"].use(Q["Button"]),n["default"].use(Q["ButtonGroup"]),n["default"].use(Q["Table"]),n["default"].use(Q["TableColumn"]),n["default"].use(Q["DatePicker"]),n["default"].use(Q["TimeSelect"]),n["default"].use(Q["TimePicker"]),n["default"].use(Q["Popover"]),n["default"].use(Q["Tooltip"]),n["default"].use(Q["Breadcrumb"]),n["default"].use(Q["BreadcrumbItem"]),n["default"].use(Q["Form"]),n["default"].use(Q["FormItem"]),n["default"].use(Q["Tabs"]),n["default"].use(Q["TabPane"]),n["default"].use(Q["Tag"]),n["default"].use(Q["Tree"]),n["default"].use(Q["Alert"]),n["default"].use(Q["Slider"]),n["default"].use(Q["Icon"]),n["default"].use(Q["Row"]),n["default"].use(Q["Col"]),n["default"].use(Q["Upload"]),n["default"].use(Q["Progress"]),n["default"].use(Q["Spinner"]),n["default"].use(Q["Badge"]),n["default"].use(Q["Card"]),n["default"].use(Q["Rate"]),n["default"].use(Q["Steps"]),n["default"].use(Q["Step"]),n["default"].use(Q["Carousel"]),n["default"].use(Q["CarouselItem"]),n["default"].use(Q["Collapse"]),n["default"].use(Q["CollapseItem"]),n["default"].use(Q["Cascader"]),n["default"].use(Q["ColorPicker"]),n["default"].use(Q["Transfer"]),n["default"].use(Q["Container"]),n["default"].use(Q["Header"]),n["default"].use(Q["Aside"]),n["default"].use(Q["Main"]),n["default"].use(Q["Footer"]),n["default"].use(Q["Timeline"]),n["default"].use(Q["TimelineItem"]),n["default"].use(Q["Link"]),n["default"].use(Q["Divider"]),n["default"].use(Q["Image"]),n["default"].use(Q["Calendar"]),n["default"].use(Q["Backtop"]),n["default"].use(Q["PageHeader"]),n["default"].use(Q["CascaderPanel"]),n["default"].use(Q["Loading"].directive),n["default"].prototype.$loading=Q["Loading"].service,n["default"].prototype.$msgbox=Q["MessageBox"],n["default"].prototype.$alert=Q["MessageBox"].alert,n["default"].prototype.$confirm=Q["MessageBox"].confirm,n["default"].prototype.$prompt=Q["MessageBox"].prompt,n["default"].prototype.$notify=Q["Notification"],n["default"].prototype.$message=Q["Message"];a("b8c0");n["default"].config.productionTip=!1,new n["default"]({router:X,store:K,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){},b8c0:function(e,t,a){},c653:function(e,t,a){var n={"./game.js":"51be","./setting.js":"dc56"};function r(e){var t=u(e);return a(t)}function u(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=u,e.exports=r,r.id="c653"},dc56:function(e,t,a){"use strict";a.r(t);a("d3b7");var n={board:[3,1,2],players:["A","B"]},r={SETPLAYERS:function(e,t){t&&(e.players=t)},INITBOARD:function(e,t){t&&(e.board=t)}},u={SetPlayers:function(e,t){var a=e.commit;e.dispatch;return new Promise((function(e,n){Array.isArray(t)||n(new Error("players type")),a("SETPLAYERS",t),e()}))},SetBoard:function(e,t){var a=e.commit;e.dispatch;return new Promise((function(e,n){Array.isArray(t)||n(new Error("border type")),a("INITBOARD",t),e()}))}};t["default"]={namespaced:!0,state:n,mutations:r,actions:u}}});